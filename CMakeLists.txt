cmake_minimum_required(VERSION 3.7)
project(XamlCpp CXX)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}/cmake/Modules")

set(BUILD_WINDOWS OFF CACHE BOOL "Build for Windows with Windows API")
set(BUILD_COCOA OFF CACHE BOOL "Build for Mac with Cocoa")
set(BUILD_GTK3 OFF CACHE BOOL "Build with GTK3")

if(NOT ${BUILD_WINDOWS} AND NOT ${BUILD_COCOA} AND NOT ${BUILD_GTK3})
    if(WIN32)
        set(BUILD_WINDOWS ON)
    elseif(UNIX)
        if(APPLE)
            set(BUILD_COCOA ON)
        else()
            set(BUILD_GTK3 ON)
        endif()
    endif()
endif()

if(${BUILD_WINDOWS})
    add_definitions(-DUNICODE -D_UNICODE -DXAML_UI_WINDOWS -DVC_EXTRALEAN)
elseif(${BUILD_COCOA})
    add_definitions(-DXAML_UI_COCOA)
    if(NOT APPLE)
        add_definitions(-DXAML_UI_USE_GNUSTEP)
        set(USE_GNUSTEP ON)
    endif()
elseif(${BUILD_GTK3})
    add_definitions(-DXAML_UI_GTK3)
endif()

add_subdirectory(meta)
add_subdirectory(ui)
add_subdirectory(xaml)
